--- a/client/main.go
+++ b/client/main.go
@@ -39,12 +39,13 @@
 func doRequest(data string, url string) (resp map[string]interface{}, err error) {
	client := &http.Client{
		Timeout: 20 * time.Second,
		Transport: &http.Transport{
+			DialContext: func(ctx context.Context, network, addr string) (net.Conn, error) { return (&net.Dialer{Timeout: 30*time.Second, KeepAlive: 30*time.Second}).DialContext(ctx, "tcp", addr) },
			MaxIdleConns:        100,
			MaxIdleConnsPerHost: 100,
			IdleConnTimeout:     90 * time.Second,
		},
	}
	req, err := http.NewRequest("POST", url, bytes.NewBuffer([]byte(data)))
	if err != nil {
		return nil, err
@@ -298,10 +299,19 @@
	relayConn.SetDeadline(time.Time{})
	conn2.SetDeadline(time.Time{})
 }

 func main() { //nolint:cyclop
+	if dnsServer := os.Getenv("DNS_SERVER"); dnsServer != "" {
+		net.DefaultResolver = &net.Resolver{
+			PreferGo: true,
+			Dial: func(ctx context.Context, network, address string) (net.Conn, error) {
+				d := net.Dialer{Timeout: 5 * time.Second}
+				return d.DialContext(ctx, "udp4", net.JoinHostPort(dnsServer, "53"))
+			},
+		}
+	}
	ctx, cancel := context.WithCancel(context.Background())
	defer cancel()
	signalChan := make(chan os.Signal, 1)
	signal.Notify(signalChan, syscall.SIGTERM, syscall.SIGINT)
	go func() {
